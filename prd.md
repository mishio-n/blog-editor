## PRD: Markdown Blog Editor

### 1.1 Document title and version

* PRD: Markdown Blog Editor
* Version: 1.0

### 1.2 Product summary

Markdown Blog Editorは、技術ブログを執筆するエンジニア向けの高機能Markdownエディターです。LexicalとReactをベースに構築され、WYSIWYGモードとプレーンテキストモードを切り替え可能な執筆体験を提供します。Markdownを真の状態として管理し、リアルタイムHTMLプレビューとカスタムCSSスタイリング機能により、エンジニアが美しい技術記事を効率的に作成できます。

最終的な出力はHTMLコードであり、ユーザーは生成されたHTMLを任意のプラットフォームに投稿できます。個人使用と社内での技術文書作成の両方をサポートし、Zenn、Notion、Typoraのような優れた執筆体験を目指しています。

## 2. Goals

### 2.1 Business goals

* エンジニアの技術ブログ執筆効率を向上させる
* 個人と組織の技術文書作成ワークフローを最適化する
* Markdownベースの執筆体験を現代的なUIで実現する
* HTMLコード生成による汎用性の高いアウトプットを提供する

### 2.2 User goals

* Markdownで効率的に技術記事を執筆したい
* リアルタイムでプレビューを確認しながら執筆したい
* 美しいHTMLを簡単に生成したい
* カスタムCSSでスタイルを調整したい
* WYSIWYGとMarkdownモードを必要に応じて切り替えたい

### 2.3 Non-goals

* 複数ユーザーでのリアルタイムコラボレーション機能
* クラウドストレージサービスとの連携
* モバイルアプリの開発
* Chrome以外のブラウザサポート

## 3. User personas

### 3.1 Key user types

* フロントエンドエンジニア
* バックエンドエンジニア
* フルスタックエンジニア
* 技術リード・アーキテクト
* 社内技術文書作成者

### 3.2 Basic persona details

* **技術ブロガー**: 個人ブログやQiita、Zennに投稿するエンジニア。Markdownに慣れ親しんでおり、美しいHTMLを簡単に生成したい
* **社内文書作成者**: 技術仕様書やAPIドキュメントを作成するエンジニア。チーム内での知識共有を重視し、統一されたスタイルでの文書作成を求める

### 3.3 Role-based access

* **個人ユーザー**: 全機能へのアクセス。ローカルファイル操作とブラウザストレージ利用
* **社内ユーザー**: 全機能へのアクセス。共有CSSテンプレート機能の利用

## 4. Functional requirements

* **エディター機能** (Priority: High)
  * WYSIWYGモードとプレーンテキストモードの切り替え
  * リアルタイムMarkdown変換とHTMLプレビュー
  * シンタックスハイライト機能
  * 豊富なフォーマットツールバー

* **ファイル操作** (Priority: High)
  * Markdownファイルの読み込み・保存
  * HTMLファイルのエクスポート
  * ブラウザストレージへの自動保存

* **スタイルカスタマイズ** (Priority: Medium)
  * カスタムCSS編集機能
  * プレビューへのリアルタイム反映
  * CSSテンプレートの共有機能

* **プレビュー機能** (Priority: High)
  * リアルタイムHTMLプレビュー
  * スクロール同期
  * 生成HTMLのクリップボードコピー

* **エンハンスメント機能** (Priority: Low)
  * 外部リンクのOG画像表示
  * 文書統計情報表示
  * テーマ切り替え（ライト・ダーク）

## 5. User experience

### 5.1 Entry points & first-time user flow

* ブラウザでアプリケーションにアクセス
* 初回起動時にサンプルMarkdownコンテンツを表示
* 直感的なツールバーとプレビューパネルでの操作開始
* 基本的な編集操作を通じてインターフェースを学習

### 5.2 Core experience

* **執筆開始**: 左パネルのエディターでMarkdownまたはWYSIWYG形式で執筆を開始。右パネルでリアルタイムプレビューを確認
* **スタイル調整**: 下部のCSSエディターでカスタムスタイルを適用し、プレビューで即座に結果を確認
* **保存・出力**: 作業内容の自動保存とワンクリックでのHTML出力により、執筆に集中できる環境を実現

### 5.3 Advanced features & edge cases

* 長文ドキュメントでのパフォーマンス最適化
* 大量の画像を含む記事での表示速度維持
* ネットワーク切断時のローカル保存継続
* 予期しないブラウザ終了からの復旧機能

### 5.4 UI/UX highlights

* VSCode風のダークテーマとライトテーマ
* 直感的なツールバーレイアウト
* リサイズ可能なパネル構成
* キーボードショートカット対応
* レスポンシブデザイン

## 6. Narrative

エンジニアは技術記事を執筆する際、Markdownの簡潔性を活かしながらも、美しいHTMLアウトプットを求めています。Markdown Blog Editorは、この両方のニーズを満たす統合環境を提供します。ユーザーは慣れ親しんだMarkdown記法で効率的に執筆し、リアルタイムプレビューで結果を確認しながら、カスタムCSSで独自のスタイルを適用できます。最終的に生成されるHTMLは、どのプラットフォームにも投稿可能な高品質なコードとして出力され、エンジニアの技術発信を強力にサポートします。

## 7. Success metrics

### 7.1 User-centric metrics

* 初回利用から5分以内での記事作成完了率
* WYSIWYGとMarkdownモード切り替えの利用頻度
* カスタムCSS機能の利用率
* HTMLエクスポート機能の使用頻度

### 7.2 Business metrics

* 月間アクティブユーザー数
* セッション時間の平均値
* 機能利用率（エディター、プレビュー、CSS編集）
* ユーザー定着率（7日間、30日間）

### 7.3 Technical metrics

* ページ読み込み時間（3秒以内）
* レンダリングパフォーマンス（60fps維持）
* メモリ使用量（500MB以下）
* エラー発生率（1%以下）

## 8. Technical considerations

### 8.1 Integration points

* ローカルファイルシステムとのファイル読み書き
* ブラウザのlocalStorageとsessionStorage
* クリップボードAPIでのコピー機能
* File API for Markdown/HTMLファイル操作

### 8.2 Data storage & privacy

* 全データはクライアントサイドで処理
* ブラウザストレージへの自動保存機能
* 外部サーバーへのデータ送信なし
* ユーザーデータの完全ローカル管理

### 8.3 Scalability & performance

* Virtual scrolling for 大容量ドキュメント
* Debounced rendering for リアルタイムプレビュー
* Lazy loading for UI components
* Memory-efficient Markdown parsing

### 8.4 Potential challenges

* 大容量MarkdownファイルのPOCs最適化
* リアルタイムレンダリングでのCPU負荷
* ブラウザストレージの容量制限
* 複雑なCSSによるプレビュー表示の不具合

## 9. Milestones & sequencing

### 9.1 Project estimate

* Medium: 4-6週間

### 9.2 Team size & composition

* 小規模: フロントエンドエンジニア1名、UI/UXデザイナー1名

### 9.3 Suggested phases

* **フェーズ1**: コア機能実装（2週間）
  * 基本エディター機能とプレビュー機能の完成

* **フェーズ2**: ストレージ機能実装（1週間）
  * ブラウザストレージとファイル操作機能の実装

* **フェーズ3**: 拡張機能実装（2週間）
  * CSS共有機能とOG画像表示機能の実装

* **フェーズ4**: 最適化とテスト（1週間）
  * パフォーマンス最適化とユーザビリティテスト

## 10. User stories

### 10.1. エディターモード切り替え

* **ID**: GH-001
* **Description**: エンジニアとして、WYSIWYGモードとMarkdownモードを簡単に切り替えて、好みの編集方法で執筆したい
* **Acceptance criteria**:
  * ツールバーにモード切り替えボタンが表示される
  * ボタンクリックで即座にモードが切り替わる
  * モード切り替え時にコンテンツが保持される
  * 現在のモードが視覚的に分かる

### 10.2. リアルタイムプレビュー

* **ID**: GH-002
* **Description**: エンジニアとして、Markdownを入力しながらリアルタイムでHTMLプレビューを確認して、出力結果を把握したい
* **Acceptance criteria**:
  * テキスト入力と同時にプレビューが更新される
  * GitHub Flavored Markdownが正しく表示される
  * プレビューエリアが右側パネルに固定表示される
  * スクロール位置がエディターと同期する

### 10.3. カスタムCSS編集

* **ID**: GH-003
* **Description**: エンジニアとして、カスタムCSSを編集してプレビューのスタイルを調整し、理想的な見た目のHTMLを生成したい
* **Acceptance criteria**:
  * CSS編集エリアが下部に表示される
  * CSS変更が即座にプレビューに反映される
  * シンタックスハイライトが提供される
  * デフォルトCSSテンプレートが用意されている

### 10.4. ファイル保存・読み込み

* **ID**: GH-004
* **Description**: エンジニアとして、作成した記事をMarkdownファイルとして保存し、後で読み込んで編集を継続したい
* **Acceptance criteria**:
  * 保存ボタンでMarkdownファイルをダウンロードできる
  * ファイル読み込みボタンでMarkdownファイルを開ける
  * ファイル名が適切に設定される
  * 文字エンコーディングが正しく処理される

### 10.5. HTMLエクスポート

* **ID**: GH-005
* **Description**: エンジニアとして、完成した記事をHTMLファイルとしてエクスポートして、ブログやサイトに投稿したい
* **Acceptance criteria**:
  * HTMLエクスポートボタンが提供される
  * 生成されるHTMLにカスタムCSSが含まれる
  * HTMLファイルがダウンロードされる
  * 生成されたHTMLがクリップボードにコピー可能

### 10.6. ブラウザストレージ保存

* **ID**: GH-006
* **Description**: エンジニアとして、編集中の内容が自動的にブラウザに保存されて、ブラウザを閉じても作業を失いたくない
* **Acceptance criteria**:
  * 定期的に作業内容がlocalStorageに保存される
  * ブラウザ再起動時に前回の内容が復元される
  * 保存状態がUI上で確認できる
  * 手動保存ボタンも提供される

### 10.7. CSS共有機能

* **ID**: GH-007
* **Description**: エンジニアとして、作成したCSSスタイルを他のユーザーと共有して、チーム内で統一されたスタイルを使用したい
* **Acceptance criteria**:
  * CSSをJSONファイルとしてエクスポートできる
  * 共有されたCSSファイルをインポートできる
  * 複数のCSSテンプレートを管理できる
  * テンプレート名を設定できる

### 10.8. 外部リンクOG画像表示

* **ID**: GH-008
* **Description**: エンジニアとして、記事内の外部リンクのOG画像をプレビューで確認して、リンクの視覚的な魅力を高めたい
* **Acceptance criteria**:
  * 外部URLのOG画像が自動的に取得される
  * プレビューエリアでOG画像が表示される
  * 画像取得エラー時の適切な処理
  * 画像表示のオン・オフ切り替え可能

### 10.9. 文書統計表示

* **ID**: GH-009
* **Description**: エンジニアとして、執筆中の記事の文字数や単語数などの統計情報を確認して、記事の規模を把握したい
* **Acceptance criteria**:
  * 文字数、単語数、行数が表示される
  * 見出し数、リスト項目数がカウントされる
  * 読了時間の目安が表示される
  * 統計情報がリアルタイムで更新される

### 10.10. テーマ切り替え

* **ID**: GH-010
* **Description**: エンジニアとして、ライトテーマとダークテーマを切り替えて、好みの環境で快適に執筆したい
* **Acceptance criteria**:
  * ツールバーにテーマ切り替えボタンが表示される
  * ワンクリックでテーマが切り替わる
  * テーマ設定がブラウザに保存される
  * システムのテーマ設定が自動検出される
